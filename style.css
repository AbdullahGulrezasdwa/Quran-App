:root {
    --p: #10b981; --bg: #020617; --surf: #0f172a; --text: #f8fafc;
    --sub: #94a3b8; --border: #1e293b; --panel-w: 0px;
}

[data-theme="sepia"] { --bg: #f5f2e9; --surf: #e8e4d9; --text: #2d241e; --sub: #5d534a; --border: #d1cdc0; --p: #8b5e3c; }

body { margin: 0; display: flex; height: 100vh; background: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; overflow: hidden; }

/* Main Layout Architecture */
#app-container { display: flex; flex: 1; overflow: hidden; }
#app-viewport { flex: 1; overflow-y: auto; padding: 40px; }

/* Epic 3: Side Panel (Slide-out) */
#side-panel { 
    width: var(--panel-w); min-width: var(--panel-w); 
    background: var(--surf); border-left: 1px solid var(--border); 
    transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow-y: auto; padding: 0;
}
#side-panel.open { --panel-w: 400px; padding: 25px; }

/* Typography (Epic 1) */
.ar { 
    font-family: 'Amiri', serif; font-size: clamp(2rem, 5vw, 3rem); 
    text-align: right; direction: rtl; line-height: 2.2; color: var(--p); 
    margin-bottom: 20px; transition: font-size 0.3s ease;
}
.ayah-card { 
    padding: 40px 0; border-bottom: 1px solid var(--border); 
    cursor: pointer; transition: background 0.2s; 
}
.ayah-card:hover { background: rgba(255,255,255,0.02); }

/* Audio Progress */
.progress-bar-container { position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: var(--border); cursor: pointer; }
#audio-progress { height: 100%; background: var(--p); width: 0%; transition: width 0.1s linear; }

/* Search Hud */
.search-container input {
    background: var(--surf); border: 1px solid var(--border); color: var(--text);
    padding: 10px 20px; border-radius: 50px; width: 300px; outline: none; transition: 0.3s;
}
.search-container input:focus { border-color: var(--p); width: 450px; box-shadow: 0 0 20px rgba(16,185,129,0.1); }
