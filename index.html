<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenith Pro Ultra | Premium Quran</title>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Amiri+Quran&family=Noto+Nastaliq+Urdu:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
    /* ══════════════════════════════════════
       DESIGN SYSTEM - VARIABLES & THEMES
    ══════════════════════════════════════ */
    :root {
      --sidebar-w: 320px;
      --hud-h: 100px;
      --radius: 18px;
      --accent: #3d8bff;
      --accent-glow: rgba(61, 139, 255, 0.3);
      --bg: #05070a;
      --sidebar: #0a0d14;
      --card: #11151d;
      --text: #f0f2f5;
      --text-dim: #94a3b8;
      --border: rgba(255, 255, 255, 0.06);
      --glass: rgba(10, 13, 20, 0.85);
      --font-arabic: 'Amiri Quran', serif; /* Uthmani Default */
    }

    [data-theme="light"] {
      --bg: #f8fafc;
      --sidebar: #ffffff;
      --card: #ffffff;
      --text: #0f172a;
      --text-dim: #64748b;
      --border: rgba(0, 0, 0, 0.08);
      --glass: rgba(255, 255, 255, 0.9);
    }

    /* Indo-Pak Script Adjustment */
    [data-script="indopak"] {
      --font-arabic: 'Scheherazade New', serif;
    }

    /* ══════════════════════════════════════
       BASE RESET & LAYOUT
    ══════════════════════════════════════ */
    * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
    
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Plus Jakarta Sans', sans-serif;
      overflow: hidden;
      transition: background 0.3s ease;
    }

    .app-container {
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      height: 100vh;
      width: 100vw;
    }

    /* ══════════════════════════════════════
       MEMORIZATION MODE SPECIALS
    ══════════════════════════════════════ */
    body.memo-mode .ayah-english {
      filter: blur(8px);
      transition: filter 0.4s ease;
      cursor: help;
      user-select: none;
    }
    body.memo-mode .ayah-english:hover {
      filter: blur(0);
    }
    body.memo-mode .ayah-arabic {
      letter-spacing: 1px;
    }

    /* ══════════════════════════════════════
       ACHIEVEMENT & TOAST ANIMATIONS
    ══════════════════════════════════════ */
    .achievement-toast {
      position: fixed;
      top: 30px;
      right: 30px;
      background: linear-gradient(135deg, #f59e0b, #d97706);
      color: white;
      padding: 16px 24px;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      gap: 15px;
      z-index: 9999;
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      animation: slideInRight 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    }

    @keyframes slideInRight {
      from { transform: translateX(120%) scale(0.9); opacity: 0; }
      to { transform: translateX(0) scale(1); opacity: 1; }
    }

    .spin { animation: spin 2s linear infinite; }
    @keyframes spin { 100% { transform: rotate(360deg); } }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--accent); }
        /* ══════════════════════════════════════
       SIDEBAR & MAIN VIEW STYLES
    ══════════════════════════════════════ */
    .sidebar {
      background: var(--sidebar);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      height: 100vh;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .sidebar-header { padding: 30px 24px 10px; }
    
    .logo-container {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 25px;
    }

    .logo-box {
      width: 42px;
      height: 42px;
      background: var(--accent);
      border-radius: 12px;
      display: grid;
      place-items: center;
      color: white;
      box-shadow: 0 8px 20px var(--accent-glow);
    }

    .search-wrapper {
      position: relative;
      margin-bottom: 20px;
    }

    .search-wrapper input {
      width: 100%;
      background: var(--card);
      border: 1px solid var(--border);
      padding: 14px 14px 14px 44px;
      border-radius: 14px;
      color: var(--text);
      font-size: 0.9rem;
      transition: border-color 0.2s;
    }

    .search-wrapper input:focus { border-color: var(--accent); }
    .search-wrapper i { position: absolute; left: 16px; top: 14px; opacity: 0.4; }

    .nav-scroll {
      flex: 1;
      overflow-y: auto;
      padding: 0 12px 120px;
    }

    .nav-item {
      padding: 14px 16px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      margin-bottom: 6px;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }

    .nav-item:hover { background: var(--card); transform: translateX(5px); }
    .nav-item.active { background: var(--accent-glow); border-color: var(--accent); color: var(--accent); }

    .main-content {
      height: 100vh;
      overflow-y: auto;
      position: relative;
      scroll-behavior: smooth;
      background: radial-gradient(circle at top right, var(--accent-glow), transparent 40%);
    }

    .view-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 60px 24px 180px;
    }
    </style>
</head>
<body>

<div class="app-container">
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <div class="logo-box"><i data-lucide="zap" fill="currentColor"></i></div>
                <div>
                    <h2 style="font-size: 1.1rem; font-weight: 800; letter-spacing: -0.5px;">ZENITH ULTRA</h2>
                    <p style="font-size: 0.65rem; font-weight: 700; opacity: 0.5; letter-spacing: 1px;">PRO EDITION V2</p>
                </div>
            </div>
            
            <div class="search-wrapper">
                <i data-lucide="search" size="18"></i>
                <input type="text" id="surahSearch" placeholder="Search Surah (Name/Num)...">
            </div>
        </div>

        <nav class="nav-scroll" id="sidebarList">
            </nav>
    </aside>

    <main class="main-content" id="mainScroll">
        <div id="view">
            </div>
    </main>
</div>
<footer class="hud">
    <div id="audioProgress" style="position: absolute; top: 0; left: 0; height: 3px; background: var(--accent); width: 0%; transition: 0.1s linear; box-shadow: 0 0 10px var(--accent);"></div>
    
    <div style="display: flex; align-items: center; gap: 15px;">
        <div id="hudIcon" style="width: 48px; height: 48px; background: var(--card); border-radius: 12px; display: grid; place-items: center; border: 1px solid var(--border);">
            <i data-lucide="music" size="20"></i>
        </div>
        <div>
            <div id="hudTitle" style="font-weight: 800; font-size: 0.95rem; letter-spacing: -0.3px;">Zenith Engine</div>
            <div id="hudSub" style="font-size: 0.75rem; opacity: 0.5; font-weight: 600;">Waiting for Selection...</div>
        </div>
    </div>

    <div style="display: flex; align-items: center; justify-content: center; gap: 25px;">
        <button class="ctrl-btn" onclick="AudioEngine.prev()"><i data-lucide="skip-back" fill="currentColor"></i></button>
        <button id="masterPlay" onclick="AudioEngine.toggle()" style="width: 60px; height: 60px; background: var(--accent); border-radius: 50%; color: white; display: grid; place-items: center; box-shadow: 0 10px 25px var(--accent-glow); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
            <i data-lucide="play" fill="currentColor" size="28"></i>
        </button>
        <button class="ctrl-btn" onclick="AudioEngine.next()"><i data-lucide="skip-forward" fill="currentColor"></i></button>
    </div>

    <div style="display: flex; justify-content: flex-end; gap: 20px; align-items: center;">
        <div style="text-align: right; margin-right: 10px;">
            <div id="goalLabel" style="font-size: 0.65rem; font-weight: 800; color: var(--accent); letter-spacing: 1px; text-transform: uppercase;">Daily Goal: 0/10</div>
            <div style="width: 100px; height: 6px; background: var(--border); border-radius: 10px; margin-top: 6px; overflow: hidden;">
                <div id="goalBar" style="width: 0%; height: 100%; background: var(--accent); transition: width 1s ease;"></div>
            </div>
        </div>
        <button onclick="UI.toggleSettings()" class="action-btn"><i data-lucide="sliders"></i></button>
        <button onclick="UI.toggleTheme()" id="themeBtn" class="action-btn"><i data-lucide="sun"></i></button>
    </div>
</footer>

<style>
    /* ══════════════════════════════════════
       HUD SPECIFIC STYLES
    ══════════════════════════════════════ */
    .hud {
        position: fixed; bottom: 0; left: 0; right: 0; height: var(--hud-h);
        background: var(--glass); backdrop-filter: blur(25px);
        border-top: 1px solid var(--border); display: grid;
        grid-template-columns: 1fr 1fr 1fr; align-items: center; padding: 0 40px;
        z-index: 1000;
    }

    .ctrl-btn { opacity: 0.6; transition: 0.2s; cursor: pointer; background: none; border: none; color: white; }
    .ctrl-btn:hover { opacity: 1; transform: scale(1.1); }
    
    .action-btn {
        width: 42px; height: 42px; background: var(--card); border: 1px solid var(--border);
        border-radius: 12px; display: grid; place-items: center; color: var(--text);
        cursor: pointer; transition: 0.2s;
    }
    .action-btn:hover { border-color: var(--accent); background: var(--accent-glow); color: var(--accent); }

    /* Settings Overlay */
    .settings-panel {
        position: fixed; bottom: 120px; right: 40px; width: 280px;
        background: var(--card); border: 1px solid var(--border);
        border-radius: var(--radius); padding: 20px; z-index: 2000;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5); display: none;
        animation: slideUp 0.3s ease-out;
    }
    .settings-panel.active { display: block; }

    .toggle-group { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
    
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
</style>

<div id="settingsPanel" class="settings-panel">
    <h3 style="font-size: 0.9rem; font-weight: 800; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
        <i data-lucide="settings-2" size="18"></i> PREFERENCES
    </h3>
    <div class="toggle-group">
        <span style="font-size: 0.85rem; font-weight: 600;">Indo-Pak Script</span>
        <button onclick="Engine.toggleScript()" id="scriptBtn" class="mini-toggle">OFF</button>
    </div>
    <div class="toggle-group">
        <span style="font-size: 0.85rem; font-weight: 600;">Memorization Mode</span>
        <button onclick="Engine.toggleMemo()" id="memoBtn" class="mini-toggle">OFF</button>
    </div>
    <div class="toggle-group">
        <span style="font-size: 0.85rem; font-weight: 600;">Auto-Play Next</span>
        <button class="mini-toggle active">ON</button>
    </div>
</div>

<style>
    .mini-toggle {
        padding: 6px 14px; border-radius: 8px; border: 1px solid var(--border);
        background: var(--bg); color: var(--text); font-size: 0.65rem;
        font-weight: 800; cursor: pointer; transition: 0.2s;
    }
    .mini-toggle.active { background: var(--accent); color: white; border-color: var(--accent); }
</style>
<script>
// ══════════════════════════════════════════════════════════════
// CORE ENGINE: THE ZENITH STATE
// ══════════════════════════════════════════════════════════════
const State = {
    currentSurah: null,
    currentAyahs: [],
    allSurahs: [],
    bookmarks: JSON.parse(localStorage.getItem('zenith_bookmarks')) || [],
    goals: JSON.parse(localStorage.getItem('zenith_goals')) || { current: 0, target: 10 },
    achievements: JSON.parse(localStorage.getItem('zenith_achievements')) || [],
    settings: {
        script: localStorage.getItem('zenith_script') || 'uthmani', // 'uthmani' or 'indopak'
        memoMode: false,
        theme: localStorage.getItem('zenith_theme') || 'dark',
        reciter: 'ar.alafasy'
    },

    save(key) {
        if (key === 'settings') {
            localStorage.setItem('zenith_script', this.settings.script);
            localStorage.setItem('zenith_theme', this.settings.theme);
        } else {
            localStorage.setItem(`zenith_${key}`, JSON.stringify(this[key]));
        }
    }
};

// ══════════════════════════════════════════════════════════════
// DATA ARCHITECTURE: THE API GATEWAY
// ══════════════════════════════════════════════════════════════
const API = {
    base: 'https://api.alquran.cloud/v1',

    async getJSON(endpoint) {
        try {
            const response = await fetch(`${this.base}/${endpoint}`);
            const data = await response.json();
            return data.data;
        } catch (err) {
            console.error("Zenith API Error:", err);
            return null;
        }
    },

    async loadSurahData(num) {
        // Feature: Dynamic Script Selection (Indo-Pak vs Uthmani)
        const arabicEdition = State.settings.script === 'indopak' 
            ? 'quran-tajweed' // Tajweed version often fits Indo-Pak styling better in APIs
            : 'quran-uthmani';

        return Promise.all([
            this.getJSON(`surah/${num}/${arabicEdition}`),
            this.getJSON(`surah/${num}/en.sahih`)
        ]);
    },

    getAudioUrl(ayahNum) {
        return `https://cdn.islamic.network/quran/audio/128/${State.settings.reciter}/${ayahNum}.mp3`;
    }
};

// ══════════════════════════════════════════════════════════════
// ACHIEVEMENT ENGINE
// ══════════════════════════════════════════════════════════════
const Achievements = {
    check(type, value) {
        const list = {
            'first_light': { title: 'First Light', desc: 'Opened your first Surah', icon: 'zap' },
            'night_owl': { title: 'Night Owl', desc: 'Reading after midnight', icon: 'moon' },
            'consistent': { title: 'Dedicated', desc: 'Reached daily goal', icon: 'award' }
        };

        if (type === 'load' && !State.achievements.includes('first_light')) {
            this.unlock('first_light', list.first_light);
        }

        if (new Date().getHours() >= 0 && new Date().getHours() < 4 && !State.achievements.includes('night_owl')) {
            this.unlock('night_owl', list.night_owl);
        }
    },

    unlock(id, data) {
        State.achievements.push(id);
        State.save('achievements');
        
        const toast = document.createElement('div');
        toast.className = 'achievement-toast';
        toast.innerHTML = `
            <div style="background:rgba(255,255,255,0.2); padding:8px; border-radius:10px;">
                <i data-lucide="${data.icon}"></i>
            </div>
            <div>
                <div style="font-size:0.7rem; opacity:0.8; text-transform:uppercase;">Achievement Unlocked</div>
                <div style="font-size:1rem; font-weight:800;">${data.title}</div>
            </div>
        `;
        document.body.appendChild(toast);
        lucide.createIcons();
        setTimeout(() => toast.remove(), 5000);
    }
};
</script>
<script>
// ══════════════════════════════════════════════════════════════
// AUDIO ENGINE (THE SOUND OF ZENITH)
// ══════════════════════════════════════════════════════════════
const AudioEngine = {
    player: new Audio(),
    currentAyahIndex: 0,
    isPlaying: false,

    init() {
        this.player.addEventListener('timeupdate', () => this.updateProgress());
        this.player.addEventListener('ended', () => {
            if (this.currentAyahIndex < State.currentAyahs.length - 1) {
                this.next();
            } else {
                this.stop();
            }
        });
        
        // Handle physical media keys (Play/Pause on keyboards/headphones)
        if ('mediaSession' in navigator) {
            navigator.mediaSession.setActionHandler('play', () => this.toggle());
            navigator.mediaSession.setActionHandler('pause', () => this.toggle());
        }
    },

    play(index) {
        if (!State.currentAyahs.length) return;
        this.currentAyahIndex = index;
        const ayah = State.currentAyahs[index];
        
        this.player.src = API.getAudioUrl(ayah.number);
        this.player.play();
        this.isPlaying = true;
        
        // UI Updates
        this.highlightAyah(index);
        this.updateHUD(ayah);
        this.updatePlayButton();
    },

    toggle() {
        if (!this.player.src && State.currentAyahs.length > 0) return this.play(0);
        if (this.isPlaying) {
            this.player.pause();
            this.isPlaying = false;
        } else {
            this.player.play();
            this.isPlaying = true;
        }
        this.updatePlayButton();
    },

    next() { this.play(this.currentAyahIndex + 1); },
    prev() { this.play(Math.max(0, this.currentAyahIndex - 1)); },

    stop() {
        this.isPlaying = false;
        this.updatePlayButton();
    },

    updateProgress() {
        const bar = document.getElementById('audioProgress');
        if (this.player.duration) {
            const pct = (this.player.currentTime / this.player.duration) * 100;
            bar.style.width = `${pct}%`;
        }
    },

    highlightAyah(index) {
        document.querySelectorAll('.ayah-card').forEach(c => c.classList.remove('active-playing'));
        const active = document.getElementById(`ayah-${index}`);
        if (active) {
            active.classList.add('active-playing');
            active.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    },

    updateHUD(ayah) {
        document.getElementById('hudTitle').innerText = `${State.currentSurah.englishName} : ${ayah.numberInSurah}`;
        document.getElementById('hudSub').innerText = `Reciting: Mishary Rashid Alafasy`;
        document.getElementById('hudIcon').innerHTML = `<i data-lucide="volume-2" class="spin-slow" color="var(--accent)"></i>`;
        lucide.createIcons();
    },

    updatePlayButton() {
        const btn = document.getElementById('masterPlay');
        btn.innerHTML = this.isPlaying 
            ? `<i data-lucide="pause" fill="currentColor" size="28"></i>` 
            : `<i data-lucide="play" fill="currentColor" size="28"></i>`;
        lucide.createIcons();
    }
};

// ══════════════════════════════════════════════════════════════
// SMART SEARCH ENGINE
// ══════════════════════════════════════════════════════════════
const Search = {
    init() {
        const input = document.getElementById('surahSearch');
        input.addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase().trim();
            const results = State.allSurahs.filter(s => 
                s.englishName.toLowerCase().includes(val) ||
                s.number.toString() === val ||
                s.name.includes(val)
            );
            UI.renderSidebar(results);
        });
    }
};
</script>

<style>
    .active-playing {
        border-color: var(--accent) !important;
        background: var(--accent-glow) !important;
        box-shadow: 0 0 20px var(--accent-glow);
    }
    .spin-slow { animation: spin 4s linear infinite; }
</style>
// ══════════════════════════════════════════════════════════════
// UI RENDERING ENGINE
// ══════════════════════════════════════════════════════════════
const UI = {
    async init() {
        const surahs = await API.getJSON('surah');
        if (surahs) {
            State.allSurahs = surahs;
            this.renderSidebar(surahs);
        }
        this.renderHome();
        this.updateGoalUI();
        Search.init();
        AudioEngine.init();
        lucide.createIcons();
    },

    renderHome() {
        document.getElementById('view').innerHTML = `
            <div class="view-container">
                <div style="text-align: center; padding: 100px 20px;">
                    <div class="logo-box" style="width: 80px; height: 80px; margin: 0 auto 30px;">
                        <i data-lucide="zap" size="40" fill="currentColor"></i>
                    </div>
                    <h1 style="font-size: 3.5rem; font-weight: 800; margin-bottom: 15px;">Zenith Ultra</h1>
                    <p style="font-size: 1.2rem; opacity: 0.6; max-width: 500px; margin: 0 auto 40px;">
                        Experience the Holy Quran with Indo-Pak scripts, advanced memorization tools, and premium audio.
                    </p>
                    <button onclick="UI.loadSurah(1)" style="background: var(--accent); color: white; padding: 18px 40px; border-radius: 50px; font-weight: 800; cursor: pointer; box-shadow: 0 10px 30px var(--accent-glow);">
                        Start Reading
                    </button>
                </div>
            </div>
        `;
        lucide.createIcons();
    },

    async loadSurah(num) {
        document.getElementById('view').innerHTML = `<div style="display:grid; place-items:center; height:60vh;"><i data-lucide="loader" class="spin" size="40"></i></div>`;
        lucide.createIcons();

        const [ar, en] = await API.loadSurahData(num);
        if (!ar) return;

        State.currentSurah = ar;
        State.currentAyahs = ar.ayahs.map((a, i) => ({ ...a, enText: en.ayahs[i].text }));

        this.renderSurah();
        Achievements.check('load');
        this.updateGoalProgress();
    },

    renderSurah() {
        const container = document.getElementById('view');
        const s = State.currentSurah;

        let html = `
            <div class="view-container">
                <div style="text-align:center; margin-bottom: 60px; background:var(--card); padding:40px; border-radius:30px; border:1px solid var(--border);">
                    <h1 style="font-family: var(--font-arabic); font-size: 3.5rem; color: var(--accent);">${s.name}</h1>
                    <p style="font-weight: 700; opacity: 0.6; margin-top: 10px;">${s.englishName} • ${s.englishNameTranslation}</p>
                </div>
                <div class="ayah-list">
        `;

        State.currentAyahs.forEach((ayah, i) => {
            html += `
                <div class="ayah-card" id="ayah-${i}">
                    <div style="position:absolute; top:20px; left:20px; font-size:0.7rem; font-weight:800; color:var(--accent); opacity:0.5;">${ayah.numberInSurah}</div>
                    <div class="ayah-arabic">${ayah.text}</div>
                    <div class="ayah-english">${ayah.enText}</div>
                    <div style="margin-top:25px; display:flex; gap:15px;">
                        <button onclick="AudioEngine.play(${i})" class="action-btn" style="width:35px; height:35px;"><i data-lucide="play" size="14"></i></button>
                        <button class="action-btn" style="width:35px; height:35px;"><i data-lucide="bookmark" size="14"></i></button>
                    </div>
                </div>
            `;
        });

        html += `</div></div>`;
        container.innerHTML = html;
        document.getElementById('mainScroll').scrollTop = 0;
        lucide.createIcons();
    },

    renderSidebar(list) {
        const container = document.getElementById('sidebarList');
        container.innerHTML = list.map(s => `
            <div class="nav-item" onclick="UI.loadSurah(${s.number})">
                <div style="font-size: 0.7rem; font-weight: 800; opacity: 0.3; width: 25px;">${s.number}</div>
                <div style="flex:1">
                    <div style="font-weight: 700; font-size: 0.9rem;">${s.englishName}</div>
                    <div style="font-size: 0.7rem; opacity: 0.5;">${s.name} • ${s.numberOfAyahs} Ayahs</div>
                </div>
            </div>
        `).join('');
    },

    // ══════════════════════════════════════════════════════════════
    // SYSTEM TOGGLES
    // ══════════════════════════════════════════════════════════════
    toggleTheme() {
        State.settings.theme = State.settings.theme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', State.settings.theme);
        State.save('settings');
        document.getElementById('themeBtn').innerHTML = `<i data-lucide="${State.settings.theme === 'dark' ? 'sun' : 'moon'}"></i>`;
        lucide.createIcons();
    },

    toggleSettings() {
        document.getElementById('settingsPanel').classList.toggle('active');
    },

    updateGoalProgress() {
        State.goals.current = Math.min(State.goals.current + 1, State.goals.target);
        State.save('goals');
        this.updateGoalUI();
    },

    updateGoalUI() {
        const pct = (State.goals.current / State.goals.target) * 100;
        document.getElementById('goalBar').style.width = `${pct}%`;
        document.getElementById('goalLabel').innerText = `Daily Goal: ${State.goals.current}/${State.goals.target}`;
    }
};

const Engine = {
    toggleScript() {
        State.settings.script = State.settings.script === 'uthmani' ? 'indopak' : 'uthmani';
        document.documentElement.setAttribute('data-script', State.settings.script);
        document.getElementById('scriptBtn').innerText = State.settings.script.toUpperCase();
        document.getElementById('scriptBtn').classList.toggle('active');
        State.save('settings');
        if (State.currentSurah) UI.loadSurah(State.currentSurah.number);
    },
    toggleMemo() {
        State.settings.memoMode = !State.settings.memoMode;
        document.body.classList.toggle('memo-mode');
        document.getElementById('memoBtn').innerText = State.settings.memoMode ? 'ON' : 'OFF';
        document.getElementById('memoBtn').classList.toggle('active');
    }
};

// Launch
window.addEventListener('DOMContentLoaded', () => UI.init());
</script>
</body>
</html>
